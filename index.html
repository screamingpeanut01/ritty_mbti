<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë§¤ìš´ë§› ì§‘ì‚¬ ìœ í˜• í…ŒìŠ¤íŠ¸</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        /* ... existing styles ... */
        body { font-family: 'Noto Sans KR', sans-serif; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .progress-bar-inner { transition: width 0.3s ease-in-out; }
        button:disabled { opacity: 0.7; cursor: not-allowed; }
        .instagram-btn { background: linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%); }
    </style>
</head>
<body class="bg-violet-200 text-slate-800 flex items-center justify-center min-h-screen p-4">
    <div id="app" class="w-full max-w-2xl mx-auto bg-white rounded-xl shadow-2xl p-6 md:p-10 text-center">

        <div id="start-screen" class="fade-in">
            <img src="images/main.png" alt="ê³ ì–‘ì´ ìºë¦­í„° ì´ë¯¸ì§€" class="w-40 h-40 md:w-48 md:h-48 rounded-full object-cover mx-auto mb-6 shadow-lg border-4 border-violet-400">
            <h1 class="text-3xl md:text-4xl font-bold mb-2 text-violet-600">ë§¤ìš´ë§› ì§‘ì‚¬ ìœ í˜• í…ŒìŠ¤íŠ¸</h1>
            <p class="text-gray-600 mb-8">ë‹¹ì‹ ì€ ì–´ë–¤ ìœ í˜•ì˜ ì§‘ì‚¬ì¼ê¹Œìš”?<br>ì†”ì§í•œ ë‹¹ì‹ ì˜ ë³¸ëŠ¥ì„ í™•ì¸í•´ë³´ì„¸ìš”.</p>
            <button id="start-btn" class="w-full bg-violet-500 hover:bg-violet-600 text-white font-bold py-3 px-4 rounded-lg text-lg transition-transform transform hover:scale-105">
                í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°
            </button>
        </div>
        <div id="result-screen" class="hidden">
            <div id="result-content" class="p-4 bg-white">
                <img id="result-image" src="" alt="ê²°ê³¼ ê³ ì–‘ì´ ì´ë¯¸ì§€" class="w-full h-auto object-cover rounded-lg mb-6 shadow-lg">
                <p class="text-lg text-gray-500 mb-2">ë‹¹ì‹ ì˜ ì§‘ì‚¬ ìœ í˜•ì€...</p>
                <div class="mb-6">
                    <p id="result-subtitle" class="text-xl md:text-2xl text-gray-700"></p>
                    <h2 id="result-main-title" class="text-3xl md:text-4xl font-bold text-violet-600"></h2>
                </div>
                <div class="bg-violet-50 p-6 rounded-lg text-left space-y-6">
                    <div>
                        <h3 class="font-bold text-lg mb-2 text-violet-700">ğŸ§ ì§‘ì‚¬ íŠ¹ì§•</h3>
                        <p id="result-description" class="text-gray-800"></p>
                    </div>
                    <div>
                        <h3 class="font-bold text-lg mb-2 text-violet-700">ğŸ˜» ì¶”ì²œ ê³ ì–‘ì´ ìœ í˜•</h3>
                        <p id="result-cat" class="text-gray-800"></p>
                    </div>
                </div>
            </div>
            <div id="action-buttons" class="mt-8 space-y-4">
                <a id="adopt-btn" href="https://play.google.com/store/apps/details?id=com.sammeows.ritty&pcampaignid=web_share" target="_blank" class="block w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-lg text-lg transition-transform transform hover:scale-105">
                    ë‚˜ë‘ ë”±ë§ëŠ” ê³ ì–‘ì´ ì…ì–‘í•˜ëŸ¬ê°€ê¸°
                </a>
                <button id="share-btn" class="w-full instagram-btn text-white font-bold py-3 px-4 rounded-lg text-lg transition-transform transform hover:scale-105">
                    ì¸ìŠ¤íƒ€ê·¸ë¨ì— ê³µìœ í•˜ê¸°
                </button>
                <button id="retry-btn" class="w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-4 rounded-lg text-lg transition-transform transform hover:scale-105">
                    ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°
                </button>
            </div>
        </div>
    </div>

    <script>
        // dataLayerë¥¼ GTMì´ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.
        window.dataLayer = window.dataLayer || [];

        // DOM ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
        const adoptBtn = document.getElementById('adopt-btn');
        const shareBtn = document.getElementById('share-btn');
        // ... (ë‚˜ë¨¸ì§€ DOM ìš”ì†Œë“¤) ...
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');
        const startBtn = document.getElementById('start-btn');
        const retryBtn = document.getElementById('retry-btn');
        const progressBar = document.getElementById('progress-bar');
        const questionNumber = document.getElementById('question-number');
        const questionText = document.getElementById('question-text');
        const questionImage = document.getElementById('question-image');
        const answerButtons = document.getElementById('answer-buttons');
        const resultContent = document.getElementById('result-content');
        const resultImage = document.getElementById('result-image');
        const resultSubtitle = document.getElementById('result-subtitle');
        const resultMainTitle = document.getElementById('result-main-title');
        const resultDescription = document.getElementById('result-description');
        const resultCat = document.getElementById('result-cat');


        // ... (quizData, resultsDataëŠ” ì´ì „ê³¼ ë™ì¼) ...
        const quizData = [ { id: 1, question: "ì§€ì¹œ ëª¸ì„ ì´ëŒê³  í˜„ê´€ë¬¸ì„ ì—´ìë§ˆì ê³ ì–‘ì´ê°€ ë°œì— ëª¸ì„ ë¹„ë¹•ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì²« í–‰ë™ì€?", image: "images/Q1.png", answers: [ { type: 'A', text: "ë‚´ ëª¸ì€ ë¶€ì„œì ¸ë„ ìƒê´€ì—†ë‹¤. ì‹ ë°œë„ ë²—ê¸° ì „ì— ì¥ë‚œê°ë¶€í„° êº¼ë‚´ í”ë“ ë‹¤." }, { type: 'B', text: "\"ì˜¤ëƒ, ë‚´ ëª¸ì„ í—ˆí•˜ë…¸ë¼.\" ë°”ë‹¥ì— ì£¼ì €ì•‰ì•„ ê³ ì–‘ì´ í„¸ì— ì–¼êµ´ì„ íŒŒë¬»ëŠ”ë‹¤." }, { type: 'C', text: "ì¼ë‹¨ ëª» ë³¸ ì²™ í™”ì¥ì‹¤ë¡œ ì§í–‰í•œë‹¤. ìš°ë¦¬ê°€ ê·¸ ì •ë„ëŠ” ì´í•´í•´ ì¤„ ì‚¬ì´ ì•„ë‹Œê°€?" }, { type: 'D', text: "ë¹„ë¹„ëŠ” ê°ë„ì™€ ì†Œë¦¬ë¥¼ ë¶„ì„í•œë‹¤. í‰ì†Œì™€ ë‹¤ë¥¸ ì ì€ ì—†ëŠ”ê°€? ì–´ë”” ì•„í”ˆê°€?" }, ] }, { id: 2, question: "í™©ê¸ˆ ê°™ì€ ì£¼ë§ ì˜¤í›„, ë­˜ í•´ì•¼ ì§‘ì‚¬ ì¸ìƒì— í›„íšŒê°€ ì—†ì„ê¹Œìš”?", image: "images/Q2.png", answers: [ { type: 'A', text: "ê´‘ë€ì˜ ë ˆì´ì € íŒŒí‹°. \"ë„ˆ ì£½ê³  ë‚˜ ì‚´ì!\"" }, { type: 'B', text: "ê³ ì–‘ì´ê°€ ë‚´ ë°° ìœ„ì—ì„œ ì ë“  ì‚¬ì´, ìˆ¨ ë§‰í˜€ë„ ì¢‹ìœ¼ë‹ˆ ê¼¼ì§ ì•Šê³  ëˆ„ì›ŒìˆëŠ”ë‹¤." }, { type: 'C', text: "ê³ ì–‘ì´ëŠ” ì°½ë°– êµ¬ê²½, ë‚˜ëŠ” ìŠ¤ë§ˆíŠ¸í°. ì„œë¡œì˜ ì˜ì—­ì„ ì¹¨ë²”í•˜ì§€ ì•ŠëŠ” ì™„ë²½í•œ ì‹œê°„." }, { type: 'D', text: "ê³ ì–‘ì´ í™”ì¥ì‹¤ ì „ì²´ ê°ˆì´ ë° ì†Œë…, ì •ìˆ˜ê¸° í•„í„° êµì²´ ë“± ë¯¸ë¤„ì™”ë˜ ì§‘ì‚¬ ì—…ë¬´ë¥¼ ì²˜ë¦¬í•œë‹¤." }, ] }, { id: 3, question: "ê³ ì–‘ì´ê°€ ì´ìœ  ì—†ì´ ë‹¹ì‹ ì„ ë¹¤íˆ ì³ë‹¤ë³´ë©° \"ì• ì˜¹\" í•˜ê³  ì›ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì†ë§ˆìŒì€?", image: "images/Q3.png", answers: [ { type: 'A', text: "\"ë˜ ì‹œì‘ì´êµ°. ì˜¤ëŠ˜ì€ ëª‡ ì‹œê°„ì´ë‚˜ ë†€ì•„ë“œë ¤ì•¼ ë§Œì¡±í•˜ì‹¤ê¹Œ?\"" }, { type: 'B', text: "\"ì œë°œ ë‚˜ ì¢€ ì•ˆì•„ë‹¬ë¼ëŠ” ì†Œë¦¬ì˜€ìœ¼ë©´... ì œë°œ...\"" }, { type: 'C', text: "\"ë§ì„ í•´, ë§ì„! ë‹µë‹µí•´ ì£½ê² ë„¤.\"" }, { type: 'D', text: "\"í˜¹ì‹œ ë‚´ê°€ ëª¨ë¥´ëŠ” ë³‘ì´ ìƒê¸´ ê±´ê°€? ì¼ë‹¨ ì¸í„°ë„·ë¶€í„° ê²€ìƒ‰í•œë‹¤.\"" }, ] }, { id: 4, question: "ê¿€ì  ìëŠ” ê³ ì–‘ì´ë¥¼ ë°œê²¬í–ˆì„ ë•Œ, ì°¸ì„ ìˆ˜ ì—†ëŠ” ë‹¹ì‹ ì˜ ë³¸ëŠ¥ì€?", image: "images/Q4.png", answers: [ { type: 'A', text: "ìëŠ” ëª¨ìŠµë„ ê·€ì—½ì§€ë§Œ, ì—­ì‹œ ë…¸ëŠ” ê²Œ ì œì¼ ì¢‹ë‹¤. ì—‰ë©ì´ë¥¼ ì”°ë£©ê±°ë¦¬ë©° ë‹¤ê°€ê°€ íˆ­ ê±´ë“œë¦°ë‹¤." }, { type: 'B', text: "ìëŠ” ì•  ì˜†ì— ì¼ë¶€ëŸ¬ ë¹„ì§‘ê³  ëˆ„ì›Œë³¸ë‹¤. ì ê²°ì—ë¼ë„ ë‚˜ë¥¼ í•¥ì•„ì¤„ì§€ ëª¨ë¥¸ë‹¤." }, { type: 'C', text: "ì´ ìˆœê°„ì„ ì˜ì›íˆ ë°•ì œí•˜ë¦¬ë¼. ì…”í„° ì†Œë¦¬ë„ ì•ˆ ë‚˜ëŠ” ì•±ìœ¼ë¡œ ì‚¬ì§„ 500ì¥ì„ ì°ëŠ”ë‹¤." }, { type: 'D', text: "í˜¹ì‹œ ìˆ¨ì‰¬ê¸° í˜ë“  ìì„¸ëŠ” ì•„ë‹ê¹Œ? ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ ê³ ì³ì£¼ê³  ì‹¶ì–´ ì†ì´ ê·¼ì§ˆê±°ë¦°ë‹¤." }, ] }, { id: 5, question: "ë‹¹ì‹ ì˜ ìŠ¤ë§ˆíŠ¸í° ê°¤ëŸ¬ë¦¬ì—ì„œ ê°€ì¥ ë§ì€ ì§€ë¶„ì„ ì°¨ì§€í•˜ëŠ” ê²ƒì€?", image: "images/Q5.png", answers: [ { type: 'A', text: "ê³ ì–‘ì´ê°€ ì¥ë‚œê°ì— ë¯¸ì³ ë‚ ë›°ëŠ” ìˆœê°„ì„ í¬ì°©í•œ 10ì´ˆì§œë¦¬ ìŠ¬ë¡œëª¨ì…˜ ì˜ìƒ." }, { type: 'B', text: "ë‚´ ì–¼êµ´ì— ì—‰ë©ì´ë¥¼ ëŒ€ê³  ìëŠ” ê³ ì–‘ì´ì™€ í•¨ê»˜ ì°ì€ ì…€ì¹´." }, { type: 'C', text: "ì •ì ì¸ ìì„¸ë¡œ ì°½ë°–ì„ ì‘ì‹œí•˜ëŠ” ê³ ì–‘ì´ì˜ ì˜ˆìˆ ì ì¸ í‘ë°± ì‚¬ì§„." }, { type: 'D', text: "ì˜¤ëŠ˜ì˜ 'ê°ì' ìƒíƒœë¥¼ ê¸°ë¡í•˜ê¸° ìœ„í•´ ì°ì–´ë‘” ê³ ì–‘ì´ í™”ì¥ì‹¤ ì‚¬ì§„." }, ] }, { id: 6, question: "ê³ ì–‘ì´ê°€ ë°©ê¸ˆ ì¡ì€ ë²Œë ˆë¥¼ ë‚´ ë°œ ì•ì— ë–¨ì–´ëœ¨ë¦½ë‹ˆë‹¤. ì´ 'ì„ ë¬¼'ì˜ ì˜ë¯¸ëŠ”?", image: "images/Q6.png", answers: [ { type: 'A', text: "\"ì‚¬ëƒ¥ ì‹¤ë ¥ì´ ë…¹ìŠ¬ì—ˆêµ¬ë‚˜, ì§‘ì‚¬. ë³´ê³  ë°°ì›Œë¼.\" ë¼ëŠ” ëœ»ìœ¼ë¡œ ë°›ì•„ë“¤ì´ê³  \"ë•¡í!\"ë¥¼ ì™¸ì¹œë‹¤." }, { type: 'B', text: "ë‚˜ë¥¼ ìœ„í•´ ì¤€ë¹„í•œ ê·¸ì˜ ë§ˆìŒì— ê°ë™í•˜ë©°, ë²Œë ˆëŠ” ëª» ë³¸ ì²™ ê³ ì–‘ì´ë§Œ ëŒì–´ì•ˆëŠ”ë‹¤." }, { type: 'C', text: "\"ê³ ë§™ë‹¤...\" ì˜í˜¼ ì—†ëŠ” ëª©ì†Œë¦¬ë¡œ ì¹­ì°¬í•œ ë’¤, ë…€ì„ì´ í•œëˆˆíŒ” ë•Œ ë¹›ì˜ ì†ë„ë¡œ ì¹˜ìš´ë‹¤." }, { type: 'D', text: "ë²Œë ˆì— ë…ì€ ì—†ëŠ”ì§€, ê³ ì–‘ì´ê°€ ë¨¹ì§€ëŠ” ì•Šì•˜ëŠ”ì§€ë¶€í„° í™•ì¸í•´ì•¼ í•œë‹¤." }, ] }, { id: 7, question: "'ì´ ë§›ì— ì§‘ì‚¬ í•˜ì§€'ë¼ê³  ëŠë¼ëŠ” ìµœê³ ì˜ ìˆœê°„ì€?", image: "images/Q7.png", answers: [ { type: 'A', text: "ì¥ë‚œê°ì„ í–¥í•´ ëŒì§„í•˜ë©° ê³µì¤‘ 3íšŒì „ì„ ë„ëŠ” ëª¨ìŠµì„ ë³¼ ë•Œ. (ë‚´ ì–´ê¹¨ëŠ” ë¶€ì„œì ¸ë„ ì¢‹ë‹¤)" }, { type: 'B', text: "ë‚´ ìˆ¨ì†Œë¦¬ë¥¼ ìì¥ê°€ ì‚¼ì•„ í’ˆì—ì„œ ì ë“¤ì—ˆì„ ë•Œ. (ë‚˜ëŠ” í™”ì¥ì‹¤ì„ ì°¸ëŠ”ë‹¤)" }, { type: 'C', text: "ë‚´ê°€ ë­˜ í•˜ë“  ì‹ ê²½ë„ ì•ˆ ì“°ëŠ” ì¤„ ì•Œì•˜ëŠ”ë°, ì–´ëŠìƒˆ ë‚´ ì˜†ì— ì™€ì„œ ì•‰ì•„ìˆì„ ë•Œ." }, { type: 'D', text: "ë¹„ì‹¼ ì˜ì–‘ì œì™€ ì‚¬ë£Œ ë•ë¶„ì— í™©ê¸ˆ ë§›ë™ì‚°ì„ ìƒì‚°í•œ ê²ƒì„ í™•ì¸í•  ë•Œ." }, ] }, { id: 8, question: "ê¹Œë‹¤ë¡œìš´ ì£¼êµ°ì˜ ì‚¬ë£Œë¥¼ ê³ ë¥´ëŠ” ê¸°ì¤€ì€?", image: "images/Q8.png", answers: [ { type: 'A', text: "\"ë›°ì–´ë¼, ëš±ëƒ¥ì•„!\" ìš°ë¦¬ ì• ì˜ ë„˜ì¹˜ëŠ” ì—ë„ˆì§€ë¥¼ ìœ„í•œ ê³ ë‹¨ë°± ê³ ì¹¼ë¡œë¦¬ ì‚¬ë£Œ." }, { type: 'B', text: "ì„±ë¶„ ë”°ìœ„... ì£¼êµ°ê»˜ì„œ ì…ë§›ì´ ì—†ìœ¼ì‹œë‹¤ëŠ”ë°, ì¼ë‹¨ ì œì¼ ì˜ ë¨¹ëŠ” ê±¸ë¡œ ë°”ì¹œë‹¤." }, { type: 'C', text: "ì–´ì°¨í”¼ ê³§ ì§ˆë ¤ í•  í…Œë‹ˆ, ì €ë ´í•œ ìƒ˜í”Œ ì‚¬ë£Œë¥¼ ì—¬ëŸ¬ ê°œ ì‚¬ì„œ ëŒë ¤ ë§‰ëŠ”ë‹¤." }, { type: 'D', text: "ë’·ë©´ì— ì íŒ ì„±ë¶„í‘œë¥¼ ì •ë…í•˜ê³  ë…¼ë¬¸ê¹Œì§€ ì°¾ì•„ë³¸ë‹¤. ì•Œë ˆë¥´ê¸° ìœ ë°œ ì„±ë¶„ì€ 1gë„ ìš©ë‚© ëª» í•œë‹¤." }, ] }, { id: 9, question: "ê³ ì–‘ì´ê°€ ì¢ì€ í‹ˆì— ë“¤ì–´ê°€ í•œì°¸ì„ ì•ˆ ë‚˜ì˜µë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì„ íƒì€?", image: "images/Q9.png", answers: [ { type: 'A', text: "ê·¸ í‹ˆ ì•ì—ì„œ í•„ì‚¬ì ìœ¼ë¡œ ì¥ë‚œê°ì„ í”ë“ ë‹¤. \"ë‚˜ì™€ë¼, ì œë°œ!\"" }, { type: 'B', text: "\"í˜¹ì‹œ ì‚ì¡Œë‹ˆ? ë‚´ê°€ ë­ ì˜ëª»í–ˆì–´?\" ë¬¸ ì•ì—ì„œ ê°„ì‹ì„ í”ë“¤ë©° ì• ì›í•œë‹¤." }, { type: 'C', text: "ë‚˜ì˜¬ ë•Œ ë˜ë©´ ì•Œì•„ì„œ ë‚˜ì˜¤ê² ì§€. ì´ëŸ´ ë• ê·¸ëƒ¥ ë‘ëŠ” ê²Œ ìƒì±…ì´ë‹¤." }, { type: 'D', text: "\"ê±°ê¸° ë¨¼ì§€ ë§ì„ í…ë°? í˜¹ì‹œ ì–´ë”” ë‚€ ê±° ì•„ë‹ˆì•¼?\" ì˜¨ê°– ê±±ì •ì„ í•˜ë©° ì•ˆì ˆë¶€ì ˆëª»í•œë‹¤." }, ] } ];
        const resultsData = { A: { subtitle: "ìº£íƒ€ì›Œì™€ í•œ ëª¸ì¸", mainTitle: "'ì¸ê°„ ë‚šì‹¯ëŒ€' ì§‘ì‚¬", description: "ë‚´ í—ˆë¦¬ ê±´ê°•ë³´ë‹¤ ì¤‘ìš”í•œ ê±´ ì£¼êµ°ì˜ ì‚¬ëƒ¥ ë³¸ëŠ¥ í•´ì†Œì…ë‹ˆë‹¤. í†µì¥ì„ í„¸ì–´ ì¥ë‚œê°ì„ ìƒë‚©í•˜ê³ , í‡´ê·¼ í›„ì—” ì§€ì¹œ ëª¸ì„ ì´ëŒê³  ê¸°êº¼ì´ ì¸ê°„ ë‚šì‹¯ëŒ€ê°€ ë˜ì–´ì¤ë‹ˆë‹¤.", cat: "'ì§€ì¹˜ë©´ ì£½ëŠ”ë‹¤' ê°œêµ¬ìŸì´ ê³ ì–‘ì´. ì§‘ì‚¬ì˜ ì²´ë ¥ì„ ë°©ì „ì‹œí‚¤ëŠ” ê²ƒì„ ìœ ì¼í•œ ë‚™ìœ¼ë¡œ ì‚¼ëŠ” ì—ë„ˆì§€ ë„˜ì¹˜ëŠ” ì‚¬ëƒ¥ê¾¼ì…ë‹ˆë‹¤.", image: "images/pritty.png" }, B: { subtitle: "ê³ ì–‘ì´ì—ê²Œ ìì•„ë¥¼ ì˜íƒí•œ", mainTitle: "'ì¸ê°„ ì˜¨ìˆ˜ë§¤íŠ¸' ì§‘ì‚¬", description: "ê³ ì–‘ì´ì˜ ì²´ì˜¨ê³¼ ë§ë‘í•œ ë±ƒì‚´, ê³¨ê³¨ì†¡ë§Œì´ í˜„ìƒì˜ ê³ í†µì„ ìŠê²Œ í•˜ëŠ” ìœ ì¼í•œ ë§ˆì•½ì…ë‹ˆë‹¤. ê³ ì–‘ì´ì˜ ì‹¬ê¸°ë¥¼ ê±°ìŠ¤ë¥´ì§€ ì•Šê³  ìµœì ì˜ ì˜¨ë„ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì— ì§‘ì°©í•©ë‹ˆë‹¤.", cat: "'ì§‘ì‚¬ëŠ” ë‚´ ì¹¨ëŒ€' ì• êµëƒ¥ì´. ì§‘ì‚¬ì˜ ë°° ìœ„ë¥¼ ì„¸ìƒì—ì„œ ê°€ì¥ í¸í•œ ì†ŒíŒŒë¡œ ì—¬ê¸°ë©°, ì§‘ì‚¬ì˜ ì˜ì‚¬ì™€ ìƒê´€ì—†ì´ ì¼ë‹¨ ëª¸ë¶€í„° ë¶€ë¹„ê³  ë³´ëŠ” ìŠ¤í‚¨ì‹­ ì¤‘ë…ìì…ë‹ˆë‹¤.", image: "images/cheetty.png" }, C: { subtitle: "ì›”ì„¸ ë‚´ëŠ” ë™ê±°ì¸", mainTitle: "'ì¡°ìš©í•œ ê´€ì°°ì' ì§‘ì‚¬", description: "ê³ ì–‘ì´ëŠ” ê³ ì–‘ì´, ë‚˜ëŠ” ë‚˜. ìš°ë¦¬ëŠ” ì„œë¡œì˜ ì‚¬ìƒí™œì„ ì¡´ì¤‘í•˜ëŠ” ì¿¨í•œ ë£¸ë©”ì´íŠ¸ ê´€ê³„ë¼ ë¯¿ê³  ìˆìŠµë‹ˆë‹¤. ì‚¬ì‹¤ì€ ê³ ì–‘ì´ê°€ ì–¸ì œ ë‹¤ê°€ì™€ ì¤„ê¹Œ ì• íƒ€ê²Œ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.", cat: "'ê°€ë” ì•„ëŠ” ì²™ì€ í•´ì¤„ê²Œ' ë§ˆì´ì›¨ì´ ê³ ì–‘ì´. ì§‘ì‚¬ë¥¼ íˆ¬ëª…ì¸ê°„ ì·¨ê¸‰í•˜ë‹¤ê°€ë„, ì¸„ë¥´ ëœ¯ëŠ” ì†Œë¦¬ê°€ ë“¤ë¦¬ë©´ ì–´ë””ì„ ê°€ í™€ì—°íˆ ë‚˜íƒ€ë‚˜ëŠ” ë°€ë‹¹ì˜ ì‹ ì…ë‹ˆë‹¤.", image: "images/chilltty.png" }, D: { subtitle: "ì‚¬ì„œ ê³ ìƒí•˜ëŠ”", mainTitle: "'í—¬ë¦¬ì½¥í„° ì§‘ì‚¬'", description: "ê³ ì–‘ì´ì˜ ëª¨ë“  ê²ƒì„ ë°ì´í„°í™”í•´ì•¼ ì§ì„±ì´ í’€ë¦½ë‹ˆë‹¤. ì˜¤ëŠ˜ì˜ ìŒìˆ˜ëŸ‰, ì–´ì œì˜ ê°ì í¬ê¸°, ì§€ë‚œì£¼ì˜ í†  ìƒíƒœê¹Œì§€ ê¸°ë¡í•˜ê³  ë¶„ì„í•©ë‹ˆë‹¤. ê³ ì–‘ì´ ê±´ê°• ì—¼ë ¤ì¦ ë§ê¸° í™˜ìì…ë‹ˆë‹¤.", cat: "'ê´€ì‹¬ ì—†ìœ¼ë©´ ì§–ëŠ”ë‹¤' ì–´ë¦¬ê´‘ìŸì´ ê³ ì–‘ì´. 1ë¶„ 1ì´ˆ ì§‘ì‚¬ì˜ ì‹œì„ ì„ ê°ˆêµ¬í•˜ë©°, ì¡°ê¸ˆì´ë¼ë„ ì†Œí™€í•˜ë©´ ì˜¨ê°– ë°©ë²•ìœ¼ë¡œ ì¡´ì¬ê°ì„ ë“œëŸ¬ë‚´ ì§‘ì‚¬ë¥¼ ì¡°ì¢…í•˜ëŠ” ì‘ì€ í­êµ°ì…ë‹ˆë‹¤.", image: "images/samtty.png" } };


        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        startBtn.addEventListener('click', startQuiz);
        retryBtn.addEventListener('click', retryQuiz);
        shareBtn.addEventListener('click', shareResult);
        
        // ìŠ¤í† ì–´ ì´ë™ ë²„íŠ¼ í´ë¦­ ì‹œ GTMìœ¼ë¡œ ì´ë²¤íŠ¸ ì „ì†¡
        adoptBtn.addEventListener('click', () => {
            dataLayer.push({
                'event': 'store_redirect_click',
                'link_url': adoptBtn.href
            });
        });

        // ... (ë‚˜ë¨¸ì§€ JS í•¨ìˆ˜ë“¤: setStoreLink, startQuiz, showQuestion ë“±) ...
        function setStoreLink() { const userAgent = navigator.userAgent || navigator.vendor || window.opera; const appStoreUrl = 'https://apps.apple.com/kr/app/ritty/id6502269998'; if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) { adoptBtn.href = appStoreUrl; } }
        setStoreLink();
        let currentQuestionIndex = 0; let scores = { A: 0, B: 0, C: 0, D: 0 }; let shuffledIndices = [];
        function startQuiz() { startScreen.classList.add('hidden'); quizScreen.classList.remove('hidden'); resultScreen.classList.add('hidden'); currentQuestionIndex = 0; scores = { A: 0, B: 0, C: 0, D: 0 }; shuffledIndices = Array.from(Array(quizData.length).keys()); for (let i = shuffledIndices.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [shuffledIndices[i], shuffledIndices[j]] = [shuffledIndices[j], shuffledIndices[i]]; } showQuestion(); }
        function showQuestion() { const container = document.getElementById('question-container'); container.classList.remove('fade-in'); void container.offsetWidth; container.classList.add('fade-in'); const questionIndex = shuffledIndices[currentQuestionIndex]; const question = quizData[questionIndex]; const shuffledAnswers = [...question.answers]; for (let i = shuffledAnswers.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [shuffledAnswers[i], shuffledAnswers[j]] = [shuffledAnswers[j], shuffledAnswers[i]]; } const progress = ((currentQuestionIndex) / quizData.length) * 100; progressBar.style.width = `${progress}%`; questionNumber.textContent = `Question ${currentQuestionIndex + 1}/${quizData.length}`; questionText.textContent = question.question; questionImage.src = question.image; answerButtons.innerHTML = ''; shuffledAnswers.forEach(answer => { const button = document.createElement('button'); button.innerHTML = answer.text; button.className = "w-full bg-gray-100 hover:bg-violet-100 text-slate-800 p-4 rounded-lg transition-all text-left border border-gray-200"; button.onclick = () => selectAnswer(answer.type); answerButtons.appendChild(button); }); }
        function selectAnswer(type) { scores[type]++; currentQuestionIndex++; if (currentQuestionIndex < quizData.length) { showQuestion(); } else { showResult(); } }
        function showResult() { quizScreen.classList.add('hidden'); resultScreen.classList.remove('hidden'); progressBar.style.width = '100%'; let maxScore = -1; let resultType = ''; let isTie = false; let tiedTypes = []; for (const type in scores) { if (scores[type] > maxScore) { maxScore = scores[type]; resultType = type; isTie = false; tiedTypes = [type]; } else if (scores[type] === maxScore) { isTie = true; tiedTypes.push(type); } } if (isTie) { resultType = tiedTypes[Math.floor(Math.random() * tiedTypes.length)]; } const result = resultsData[resultType]; resultImage.src = result.image; resultSubtitle.textContent = result.subtitle; resultMainTitle.textContent = result.mainTitle; resultDescription.textContent = result.description; resultCat.textContent = result.cat; dataLayer.push({'event': 'test_completed', 'result_type': result.mainTitle}); }
        function retryQuiz() { resultScreen.classList.add('hidden'); startScreen.classList.remove('hidden'); startScreen.classList.add('fade-in'); }
        async function shareResult() {
            // ê³µìœ  ë²„íŠ¼ í´ë¦­ ì‹œ GTMìœ¼ë¡œ ì´ë²¤íŠ¸ ì „ì†¡
            dataLayer.push({
                'event': 'share_button_click'
            });

            const shareBtn = document.getElementById('share-btn');
            const resultElement = document.getElementById('result-content');
            shareBtn.disabled = true;
            shareBtn.textContent = 'ê³µìœ  ì´ë¯¸ì§€ ìƒì„± ì¤‘...';
            try {
                resultElement.style.width = '640px'; 
                const canvas = await html2canvas(resultElement, { backgroundColor: "#ffffff", useCORS: true, scale: 2 });
                resultElement.style.width = '';
                canvas.toBlob(async (blob) => {
                    const file = new File([blob], "ë‚˜ì˜_ì§‘ì‚¬ìœ í˜•_ê²°ê³¼.png", { type: "image/png" });
                    const shareData = { files: [file], title: 'ë‚˜ì˜ ë§¤ìš´ë§› ì§‘ì‚¬ ìœ í˜•ì€?', text: 'ê³¼ì—° ë‚˜ëŠ” ì–´ë–¤ ìœ í˜•ì˜ ì§‘ì‚¬ì¼ê¹Œ? ì§€ê¸ˆ ë°”ë¡œ í™•ì¸í•´ë³´ì„¸ìš”!' };
                    if (navigator.share && navigator.canShare(shareData)) {
                        try {
                            await navigator.share(shareData);
                            shareBtn.textContent = 'ê³µìœ  ì™„ë£Œ!';
                        } catch (err) {
                            console.log('Share was cancelled', err);
                            shareBtn.textContent = 'ì¸ìŠ¤íƒ€ê·¸ë¨ì— ê³µìœ í•˜ê¸°';
                        }
                    } else {
                        alert('ê³µìœ  ê¸°ëŠ¥ì„ ì§€ì›í•˜ì§€ ì•Šê±°ë‚˜ HTTPS í™˜ê²½ì´ ì•„ë‹™ë‹ˆë‹¤. ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤.');
                        const imageURL = URL.createObjectURL(blob);
                        const downloadLink = document.createElement('a');
                        downloadLink.href = imageURL;
                        downloadLink.download = 'ë‚˜ì˜_ì§‘ì‚¬ìœ í˜•_ê²°ê³¼.png';
                        document.body.appendChild(downloadLink);
                        downloadLink.click();
                        document.body.removeChild(downloadLink);
                        URL.revokeObjectURL(imageURL);
                    }
                }, 'image/png');
            } catch (err) {
                console.error("ì´ë¯¸ì§€ ë³€í™˜ ì‹¤íŒ¨:", err);
                alert("ì´ë¯¸ì§€ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
            } finally {
                shareBtn.disabled = false;
                if(shareBtn.textContent.includes('...')) {
                   shareBtn.textContent = 'ì¸ìŠ¤íƒ€ê·¸ë¨ì— ê³µìœ í•˜ê¸°';
                }
            }
        }
    </script>
</body>
</html>
